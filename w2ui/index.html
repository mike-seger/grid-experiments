<!DOCTYPE html>
<html>
<head>
    <title>W2UI</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-dsv@3"></script>
    <script type="text/javascript" src="https://rawgit.com/vitmalina/w2ui/master/dist/w2ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://rawgit.com/vitmalina/w2ui/master/dist/w2ui.min.css" />

    <style>
        body, html {
			overflow: hidden;
			padding: 0;
			margin: 0;
			border: 0;
		}

        body {
            padding: 9px;
            height: 100vh;
        }
    </style>

</head>

<body>

<div id="main" style="width: 100%; height: 100%;"></div>

<script type="text/javascript">
var config = {
    grid: {
        name: 'grid',
        selectType: 'cell',
        recordHeight: 23,
        show: {
            footer: true,
            lineNumbers: true
        },
    }
};

query(() => {
    new w2grid(config.grid)
    w2ui.grid.columns = [
        { field: 'id', text: 'id' },
        { field: 'city', text: 'city', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'population', text: 'population', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'country', text: 'country', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'iso_country', text: 'iso_country', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'geo_id', text: 'geo_id', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'latitude', text: 'latitude', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'longitude', text: 'longitude', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } },
        { field: 'modified', text: 'modified', size: '12.5%', resizable: true, sortable: true, editable: { type: 'text' } }
    ]
    w2ui.grid.lineNumberWidth = 50

    fetch('../data/CITY.csv')
        .then((response) => response.text())
        .then((csv) => {
            const data = d3.csvParse(csv);
            console.log(data);
            for (var i = 0; i < data.length; i++) data[i].recid = i;
            w2ui.grid.records = data;
            w2ui.grid.total = w2ui.grid.records.length
            w2ui.grid.buffered = w2ui.grid.total
            w2ui.grid.hideColumn('id');
            w2ui.grid.render(query('#main')[0])
            w2ui.grid.focus()
        }
    );
})
</script>

</body>
</html>
